{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f1b99de3c7d0865b023b","webpack:///./src/composr-connector.js","webpack:///./src/utils/utils.js","webpack:///./src/utils/jwt.js","webpack:///./src/utils/cryptography.js","webpack:///./src/auth/AuthRequest.js","webpack:///./src/auth/AuthPersist.js","webpack:///./src/auth/AuthConnector.js","webpack:///./src/connect/Connect.js"],"names":[],"mappings":"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","file":"composr-connector.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"composrCR\"] = factory();\n\telse\n\t\troot[\"composrCR\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f1b99de3c7d0865b023b\n **/","export * from './utils/utils';\nexport { default as AuthRequest } from './auth/AuthRequest';\nexport { default as AuthPersist } from './auth/AuthPersist';\nexport { default as AuthConnector } from './auth/AuthConnector';\nexport { default as Connect } from './connect/Connect';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/composr-connector.js\n **/","import * as jwt from './jwt';\n\nexport function buildURI(urlBase) {\n  return urlBase.replace('{{module}}', 'composr');\n}\n\nexport function checkStatus(response) {\n  if (response.ok) {\n    return response.json().catch(() => response);\n  }\n\n  let error = new Error(response.statusText);\n  error.status = response.status;\n  error.response = response;\n  throw error;\n\n}\n\nexport function generateUUID() {\n  let d = new Date().getTime();\n  let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    let r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n  });\n  return uuid;\n}\n\nexport { jwt };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/utils.js\n **/","import * as cryptography from './cryptography';\n\n/*\n * Extracted from Corbel-js: https://github.com/corbel-platform/corbel-js\n * Original module: https://github.com/corbel-platform/corbel-js/blob/master/src/jwt.js\n */\n// jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n// TODO: Use ES6 syntax\nconst EXPIRATION = 3500;\nconst ALGORITHM = 'HS256';\nconst TYP = 'JWT';\nconst VERSION = '1.0.0';\n\n/**\n * JWT-HmacSHA256 generator\n * http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html\n *\n * @param  {Object}                                 claims Specific claims to include in the JWT (iss, aud, exp, scope, ...)\n * @param  {String} secret                          String with the client assigned secret\n * @param  {Object} [alg='corbel.jwt.ALGORITHM']    Object with the algorithm type\n * @return {String} jwt                             JWT string\n */\nexport function generate(claims, secret, alg) {\n  claims = claims || {};\n  claims.exp = claims.exp || _generateExp();\n\n  if (!claims.iss) {\n    throw new Error('jwt:undefined:iss');\n  }\n  if (!claims.aud) {\n    throw new Error('jwt:undefined:aud');\n  }\n\n  return _generate(claims, secret, alg);\n}\n\nexport function decode(assertion) {\n  var decoded = assertion.split('.');\n\n  try {\n    decoded[0] = JSON.parse(atob(decoded[0]));\n  } catch (e) {\n    decoded[0] = false;\n  }\n\n  try {\n    decoded[1] = JSON.parse(atob(decoded[1]));\n  } catch (e) {\n    decoded[1] = false;\n  }\n\n  if (!decoded[0] && !decoded[1]) {\n    throw new Error('corbel:jwt:decode:invalid_assertion');\n  }\n\n  decoded[0] = decoded[0] || {};\n  decoded[1] = decoded[1] || {};\n\n  Object.keys(decoded[1]).forEach(function(key) {\n    decoded[0][key] = decoded[1][key];\n  });\n\n  return decoded[0];\n}\n\nfunction _generate(claims, secret, alg) {\n  alg = alg || ALGORITHM;\n\n  // Ensure claims specific order\n  var claimsKeys = [\n    'iss',\n    'aud',\n    'exp',\n    'scope',\n    'prn',\n    'version',\n    'refresh_token',\n    'request_domain',\n\n    'basic_auth.username',\n    'basic_auth.password',\n\n    'device_id'\n  ];\n\n  var finalClaims = {};\n  claimsKeys.forEach(function(key) {\n    if (claims[key]) {\n      finalClaims[key] = claims[key];\n    }\n  });\n\n  Object.assign(finalClaims, claims);\n\n  if (Array.isArray(finalClaims.scope)) {\n    finalClaims.scope = finalClaims.scope.join(' ');\n  }\n\n  var bAlg = cryptography.rstr2b64(cryptography.str2rstr_utf8(JSON.stringify({\n      typ: TYP,\n      alg: alg\n    })));\n  var bClaims = cryptography.rstr2b64(cryptography.str2rstr_utf8(JSON.stringify(finalClaims)));\n  var segment = bAlg + '.' + bClaims;\n  var assertion = cryptography.b64tob64u(cryptography.b64_hmac_sha256(secret, segment));\n\n  return segment + '.' + assertion;\n}\n\nfunction _generateExp() {\n  return Math.round((new Date().getTime() / 1000)) + EXPIRATION;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/jwt.js\n **/","/*************************************************************************************************\n * Extracted from Corbel-js: https://github.com/corbel-platform/corbel-js                        *\n * Original module: https://github.com/corbel-platform/corbel-js/blob/master/src/cryptography.js *\n *************************************************************************************************/\n\n/*********************************************************************************\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined *\n * in FIPS 180-2                                                                 *\n * Version 2.2 Copyright Angel Marin, Paul Johnston 2000 - 2009.                 *\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet                 *\n * Distributed under the BSD License                                             *\n * See http://pajhome.org.uk/crypt/md5 for details.                              *\n * Also http://anmar.eu.org/projects/jssha2/                                     *\n *********************************************************************************/\n// TODO: Use ES6 syntax\n/*\n * Configurable variables. You may need to tweak these to be compatible with\n * the server-side, but the defaults work in most cases.\n */\nlet hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase        */\nlet b64pad = ''; /* base-64 pad character. \"=\" for strict RFC compliance   */\n\n/* jshint ignore:start */\n// jscs:disable\nlet sha256_K = new Array(\n  1116352408, 1899447441, -1245643825, -373957723, 961987163, 1508970993, -1841331548, -1424204075, -670586216, 310598401, 607225278, 1426881987,\n  1925078388, -2132889090, -1680079193, -1046744716, -459576895, -272742522,\n  264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, -1740746414, -1473132947, -1341970488, -1084653625, -958395405, -710438585,\n  113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291,\n  1695183700, 1986661051, -2117940946, -1838011259, -1564481375, -1474664885, -1035236496, -949202525, -778901479, -694614492, -200395387, 275423344,\n  430227734, 506948616, 659060556, 883997877, 958139571, 1322822218,\n  1537002063, 1747873779, 1955562222, 2024104815, -2067236844, -1933114872, -1866530822, -1538233109, -1090935817, -965641998\n);\n\nexport function b64_hmac_sha256(k, d) {\n  return rstr2b64(rstr_hmac_sha256(str2rstr_utf8(k), str2rstr_utf8(d)));\n};\n\n/*\n * Calculate the HMAC-sha256 of a key and some data (raw strings)\n */\nexport function rstr_hmac_sha256(key, data) {\n  var bkey = rstr2binb(key);\n  if (bkey.length > 16) {\n    bkey = binb_sha256(bkey, key.length * 8);\n  }\n\n  var ipad = Array(16),\n    opad = Array(16);\n  for (var i = 0; i < 16; i++) {\n    ipad[i] = bkey[i] ^ 0x36363636;\n    opad[i] = bkey[i] ^ 0x5C5C5C5C;\n  }\n\n  var hash = binb_sha256(ipad.concat(rstr2binb(data)), 512 + data.length * 8);\n  return binb2rstr(binb_sha256(opad.concat(hash), 512 + 256));\n};\n\n/*\n * Convert a raw string to a base-64 string\n */\nexport function rstr2b64(input) {\n  try {\n    b64pad\n  } catch (e) {\n    b64pad = '';\n  }\n  var tab = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  var output = '';\n  var len = input.length;\n  for (var i = 0; i < len; i += 3) {\n    var triplet = (input.charCodeAt(i) << 16) | (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0) | (i + 2 < len ? input.charCodeAt(i + 2) : 0);\n    for (var j = 0; j < 4; j++) {\n      if (i * 8 + j * 6 > input.length * 8) output += b64pad;\n      else output += tab.charAt((triplet >>> 6 * (3 - j)) & 0x3F);\n    }\n  }\n  return output;\n};\n\n/*\n * Encode a string as utf-8.\n * For efficiency, this assumes the input is valid utf-16.\n */\nexport function str2rstr_utf8(input) {\n  var output = '';\n  var i = -1;\n  var x, y;\n\n  while (++i < input.length) {\n    /* Decode utf-16 surrogate pairs */\n    x = input.charCodeAt(i);\n    y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;\n    if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {\n      x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);\n      i++;\n    }\n\n    /* Encode output as utf-8 */\n    if (x <= 0x7F)\n      output += String.fromCharCode(x);\n    else if (x <= 0x7FF)\n      output += String.fromCharCode(0xC0 | ((x >>> 6) & 0x1F),\n        0x80 | (x & 0x3F));\n    else if (x <= 0xFFFF)\n      output += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),\n        0x80 | ((x >>> 6) & 0x3F),\n        0x80 | (x & 0x3F));\n    else if (x <= 0x1FFFFF)\n      output += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),\n        0x80 | ((x >>> 12) & 0x3F),\n        0x80 | ((x >>> 6) & 0x3F),\n        0x80 | (x & 0x3F));\n  }\n  return output;\n};\n\n/*\n * Convert a raw string to an array of big-endian words\n * Characters >255 have their high-byte silently ignored.\n */\nexport function rstr2binb(input) {\n  var output = Array(input.length >> 2);\n  for (var i = 0; i < output.length; i++)\n    output[i] = 0;\n  for (var i = 0; i < input.length * 8; i += 8)\n    output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (24 - i % 32);\n  return output;\n};\n\n/*\n * Convert an array of big-endian words to a string\n */\nexport function binb2rstr(input) {\n  var output = '';\n  for (var i = 0; i < input.length * 32; i += 8)\n    output += String.fromCharCode((input[i >> 5] >>> (24 - i % 32)) & 0xFF);\n  return output;\n};\n\n/*\n * Main sha256 function, with its support functions\n */\nexport function sha256_S(X, n) {\n  return (X >>> n) | (X << (32 - n));\n};\n\nexport function sha256_R(X, n) {\n  return (X >>> n);\n};\n\nexport function sha256_Ch(x, y, z) {\n  return ((x & y) ^ ((~x) & z));\n};\n\nfunction sha256_Maj(x, y, z) {\n  return ((x & y) ^ (x & z) ^ (y & z));\n};\n\nexport function sha256_Sigma0256(x) {\n  return (sha256_S(x, 2) ^ sha256_S(x, 13) ^ sha256_S(x, 22));\n};\n\nexport function sha256_Sigma1256(x) {\n  return (sha256_S(x, 6) ^ sha256_S(x, 11) ^ sha256_S(x, 25));\n};\n\nexport function sha256_Gamma0256(x) {\n  return (sha256_S(x, 7) ^ sha256_S(x, 18) ^ sha256_R(x, 3));\n};\n\nexport function sha256_Gamma1256(x) {\n  return (sha256_S(x, 17) ^ sha256_S(x, 19) ^ sha256_R(x, 10));\n};\n\nexport function binb_sha256(m, l) {\n  var HASH = new Array(1779033703, -1150833019, 1013904242, -1521486534,\n    1359893119, -1694144372, 528734635, 1541459225);\n  var W = new Array(64);\n  var a, b, c, d, e, f, g, h;\n  var i, j, T1, T2;\n\n  /* append padding */\n  m[l >> 5] |= 0x80 << (24 - l % 32);\n  m[((l + 64 >> 9) << 4) + 15] = l;\n\n  for (i = 0; i < m.length; i += 16) {\n    a = HASH[0];\n    b = HASH[1];\n    c = HASH[2];\n    d = HASH[3];\n    e = HASH[4];\n    f = HASH[5];\n    g = HASH[6];\n    h = HASH[7];\n\n    for (j = 0; j < 64; j++) {\n      if (j < 16) W[j] = m[j + i];\n      else W[j] = safe_add(safe_add(safe_add(sha256_Gamma1256(W[j - 2]), W[j - 7]),\n        sha256_Gamma0256(W[j - 15])), W[j - 16]);\n\n      T1 = safe_add(safe_add(safe_add(safe_add(h, sha256_Sigma1256(e)), sha256_Ch(e, f, g)),\n        sha256_K[j]), W[j]);\n      T2 = safe_add(sha256_Sigma0256(a), sha256_Maj(a, b, c));\n      h = g;\n      g = f;\n      f = e;\n      e = safe_add(d, T1);\n      d = c;\n      c = b;\n      b = a;\n      a = safe_add(T1, T2);\n    }\n\n    HASH[0] = safe_add(a, HASH[0]);\n    HASH[1] = safe_add(b, HASH[1]);\n    HASH[2] = safe_add(c, HASH[2]);\n    HASH[3] = safe_add(d, HASH[3]);\n    HASH[4] = safe_add(e, HASH[4]);\n    HASH[5] = safe_add(f, HASH[5]);\n    HASH[6] = safe_add(g, HASH[6]);\n    HASH[7] = safe_add(h, HASH[7]);\n  }\n  return HASH;\n};\n\nexport function safe_add(x, y) {\n  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return (msw << 16) | (lsw & 0xFFFF);\n};\n\n/*! base64x-1.1.3 (c) 2012-2014 Kenji Urushima | kjur.github.com/jsjws/license\n */\n/*\n * base64x.js - Base64url and supplementary functions for Tom Wu's base64.js library\n *\n * version: 1.1.3 (2014 May 25)\n *\n * Copyright (c) 2012-2014 Kenji Urushima (kenji.urushima@gmail.com)\n *\n * This software is licensed under the terms of the MIT License.\n * http://kjur.github.com/jsjws/license/\n *\n * The above copyright and license notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * DEPENDS ON:\n *   - base64.js - Tom Wu's Base64 library\n */\n\n/**\n * Base64URL and supplementary functions for Tom Wu's base64.js library.<br/>\n * This class is just provide information about global functions\n * defined in 'base64x.js'. The 'base64x.js' script file provides\n * global functions for converting following data each other.\n * <ul>\n * <li>(ASCII) String</li>\n * <li>UTF8 String including CJK, Latin and other characters</li>\n * <li>byte array</li>\n * <li>hexadecimal encoded String</li>\n * <li>Full URIComponent encoded String (such like \"%69%94\")</li>\n * <li>Base64 encoded String</li>\n * <li>Base64URL encoded String</li>\n * </ul>\n * All functions in 'base64x.js' are defined in {@link _global_} and not\n * in this class.\n * Base64URL and supplementary functions for Tom Wu's base64.js library\n *\n * @class\n * @author Kenji Urushima\n * @version 1.1 (07 May 2012)\n * @requires base64.js\n * @see <a href=\"http://kjur.github.com/jsjws/\">'jwjws'(JWS JavaScript Library) home page http://kjur.github.com/jsjws/</a>\n * @see <a href=\"http://kjur.github.com/jsrsasigns/\">'jwrsasign'(RSA Sign JavaScript Library) home page http://kjur.github.com/jsrsasign/</a>\n */\nexport function Base64x() {};\n\n// ==== base64 / base64url ================================\n/**\n * convert a Base64 encoded string to a Base64URL encoded string.<br/>\n * Example: \"ab+c3f/==\" &rarr; \"ab-c3f_\"\n *\n * @param {String} s Base64 encoded string\n * @return {String} Base64URL encoded string\n */\nexport function b64tob64u(s) {\n  s = s.replace(/\\=/g, '');\n  s = s.replace(/\\+/g, '-');\n  s = s.replace(/\\//g, '_');\n  return s;\n};\n/* jshint ignore:end */\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/cryptography.js\n **/","import * as utils from '../utils/utils';\n\nif (this && this.Meteor) {\n  // NOTE: this only work if it is used with the meteor package version of this library.\n\n  this.Headers = fetch.Headers,\n  this.Request = fetch.Request;\n\n  fetch.Promise = Promise;\n}\n\nclass AuthRequest {\n  constructor(authConfig) {\n    // Init auth variables\n    this.authConfig = authConfig;\n  }\n\n  /////////////////\n  // Private API //\n  /////////////////\n\n  /**\n   * Creates a credentials object with data stored in this.authconfig\n   * and extends it with more authData (if provided)\n   *\n   * @param  {Object} authData Extended auth data (i.e. user & pass)\n   * @param  {String} scope\n   * @return {Object}\n   */\n  _createClaims(authData, scope) {\n    const { clientId, iamAUD, scopes, defaultAuthData } = this.authConfig;\n    let claims = {\n      iss: clientId,\n      aud: iamAUD,\n      scope: scopes[scope]\n    };\n\n    Object.assign(claims, defaultAuthData);\n    Object.assign(claims, authData);\n\n    return claims;\n  }\n\n  /**\n   * Generates jwt\n   *\n   * @param  {Object} claims\n   * @param  {String} clientSecret\n   * @return {String}\n   */\n  _generateAssertion(claims, clientSecret) {\n    return utils.jwt.generate(claims, clientSecret);\n  }\n\n  /**\n   * Authenticates with composr\n   * Uses fetch (or fetch polyfill: https://github.com/github/fetch)\n   *\n   * @param  {String} endpoint     Endpoint to comunicate with\n   * @param  {Object} claims  Credentials data created with _createClaims\n   * @param  {Object} headers\n   * @return {Object} A result promise\n   */\n  _authenticate(endpoint, claims, headers) {\n    const { endpoints, urlBase, clientSecret, defaultHeaders } = this.authConfig;\n    const url = utils.buildURI(urlBase) + endpoints[endpoint];\n    const jwt = this._generateAssertion(claims, clientSecret);\n    const body = {\n      jwt\n    };\n    let authenticationHeaders = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json; charset=utf-8'\n    };\n\n    Object.assign(authenticationHeaders, defaultHeaders);\n    Object.assign(authenticationHeaders, headers);\n\n    let headersInstance = new Headers(authenticationHeaders);\n\n    const request = new Request(url, {\n      credentials: 'same-origin',\n      mode: 'cors',\n      cache: 'no-store',\n      method: 'POST',\n      headers: headersInstance,\n      body: JSON.stringify(body)\n    });\n\n    return fetch(request).then(utils.checkStatus);\n  }\n\n  ////////////////\n  // Public API //\n  ////////////////\n\n  /**\n   * Authenticates with client scope\n   *\n   * @return {Object} Promise\n   */\n  authenticateClient() {\n    const claims = this._createClaims({}, 'client');\n\n    this.clientAccessTokenPromise = this._authenticate('loginClient', claims);\n\n    return this.clientAccessTokenPromise;\n  }\n\n  /**\n   * Sign in method\n   * Calls _authenticate() method with the inserted credentials\n   *\n   * @return {Object} A result promise\n   */\n  authenticateUser({email, password, headersExtension = {}, authDataExtension = {}}) {\n    const authData = Object.assign({\n      'basic_auth.username': email,\n      'basic_auth.password': password\n    }, authDataExtension);\n\n    const claims = this._createClaims(authData, 'user');\n\n    const request = this._authenticate('login', claims, headersExtension);\n\n    return request;\n  }\n\n  /**\n   * Refresh Token method\n   * Calls _authenticate() method with the user refresh token provided\n   *\n   * @return {Object} A result promise\n   */\n  refreshUserToken({refreshToken, headersExtension = {}, authDataExtension = {}}) {\n    const authData = Object.assign({\n      'refresh_token': refreshToken\n    }, authDataExtension);\n\n    const claims = this._createClaims(authData, 'user');\n\n    const request = this._authenticate('refreshToken', claims, headersExtension);\n\n    return request;\n  }\n\n  /**\n   * Logs out method\n   * Calls _authenticate() method with provided credentials\n   */\n  logoutUser({accessToken, headersExtension = {}, authDataExtension = {}}) {\n    const headers = Object.assign({\n      'Authorization': accessToken,\n    }, headersExtension);\n\n    const claims = this._createClaims(authDataExtension, 'user');\n\n    const request = this._authenticate('logout', claims, headers);\n\n    return request;\n  }\n}\n\nexport default AuthRequest;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/auth/AuthRequest.js\n **/","class AuthPersist {\n  constructor(cookies = []) {\n    this._isNode();\n    this.getRememberFromStorage();\n    this.getTokensFromStorage();\n    this.cookies = cookies;\n  }\n\n  /////////////////\n  // Private API //\n  /////////////////\n\n  _isNode() {\n    const evaluateEnvironment = new Function('try {return window;}catch(e){ return false;}');\n\n    if (evaluateEnvironment()) {\n      this.sessionStorage = window.sessionStorage;\n      this.localStorage = window.localStorage;\n\n      return false;\n    }\n\n    this.sessionStorage = {\n      removeItem(item) {\n        this[item] = void 0;\n      }\n    };\n\n    this.localStorage = {\n      removeItem(item) {\n        this[item] = void 0;\n      }\n    };\n\n    return true;\n  }\n\n  /**\n   * Adds data to localStorage\n   *\n   * @param {Object} data\n   */\n  _addLocalStorage(data) {\n    if (this.remember) {\n      this.localStorage.remember = true;\n      this.localStorage.refreshToken = data.refreshToken;\n    }\n    if (data.authOptions) {\n      this.localStorage.authOptions = JSON.stringify(data.authOptions);\n    }\n    this.localStorage.accessToken = data.accessToken;\n    this.localStorage.expiresAt = data.expiresAt;\n\n  }\n\n  /**\n   * Adds data to sessionStorage\n   *\n   * @param {Object} data\n   */\n  _addSessionStorage(data) {\n\n    if (this.remember) {\n      this.sessionStorage.remember = true;\n    }\n    if (data.authOptions) {\n      this.sessionStorage.authOptions = JSON.stringify(data.authOptions);\n    }\n    this.sessionStorage.refreshToken = data.refreshToken;\n    this.sessionStorage.accessToken = data.accessToken;\n    this.sessionStorage.expiresAt = data.expiresAt;\n\n  }\n\n  /**\n   * Removes auth data from localStorage\n   */\n  _removeLocalStorage() {\n    this.localStorage.removeItem('refreshToken');\n    this.localStorage.removeItem('accessToken');\n    this.localStorage.removeItem('expiresAt');\n    this.localStorage.removeItem('remember');\n    this.localStorage.removeItem('authOptions');\n  }\n\n  /**\n   * Removes auth data from sessionStorage\n   */\n  _removeSessionStorage() {\n    this.sessionStorage.removeItem('refreshToken');\n    this.sessionStorage.removeItem('accessToken');\n    this.sessionStorage.removeItem('expiresAt');\n    this.sessionStorage.removeItem('remember');\n    this.sessionStorage.removeItem('authOptions');\n  }\n\n  _removeUserCookie(cookieName) {\n    document.cookie = cookieName + '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n  }\n\n  _removeUserCookies() {\n    for (const cookie of this.cookies) {\n      this._removeUserCookie(cookie);\n    }\n  }\n\n  _getAuthOptionsFromStorage() {\n    let authOptions = this.sessionStorage.authOptions ||\n      this.localStorage.authOptions;\n    try {\n      authOptions = JSON.parse(authOptions);\n    } catch (err) {\n      authOptions = {};\n    }\n    return authOptions;\n  }\n\n  _getUserAccessToken() {\n    const sessionStorageToken = {\n      accessToken: this.sessionStorage.accessToken,\n      expiresAt: parseInt(this.sessionStorage.expiresAt)\n    };\n\n    const localStorageToken = {\n      accessToken: this.localStorage.accessToken,\n      expiresAt: parseInt(this.localStorage.expiresAt)\n    };\n\n    let mostRecentToken = {};\n\n    if (!isNaN(sessionStorageToken.expiresAt) && !isNaN(localStorageToken.expiresAt)) {\n      mostRecentToken = sessionStorageToken.expiresAt > localStorageToken.expiresAt ? sessionStorageToken : localStorageToken;\n      return mostRecentToken;\n    }\n\n    mostRecentToken = isNaN(sessionStorageToken.expiresAt) ? localStorageToken : sessionStorageToken;\n\n    return mostRecentToken;\n  }\n\n  _getUserTokens() {\n    const refreshToken = this.sessionStorage.refreshToken ||\n      this.localStorage.refreshToken;\n    const {\n      accessToken,\n      expiresAt\n    } = this._getUserAccessToken();\n    const userTokens = {\n      refreshToken,\n      accessToken,\n      expiresAt\n    };\n\n    return userTokens;\n  }\n\n  _getClientAccessToken() {\n    let accessToken = this.sessionStorage.clientAccessToken;;\n    let expiresAt = this.sessionStorage.clientExpiresAt;\n\n    return {\n      accessToken,\n      expiresAt\n    };\n  }\n\n  ////////////////\n  // Public API //\n  ////////////////\n\n  /**\n   * Persist client accessToken\n   */\n  persistClientToken({\n    accessToken,\n    expiresAt\n  }) {\n\n    this.sessionStorage.clientAccessToken = accessToken;\n    this.sessionStorage.clientExpiresAt = expiresAt;\n\n    this.tokens.client = {\n      accessToken,\n      expiresAt\n    };\n  }\n\n  /**\n   * Stores result auth data in local & session storage\n   *\n   * @param  {Object} tokenObject [accessToken, refreshToken, expiresAt, authOptions]\n   */\n  persistAuthData(tokenObject) {\n    const {\n      accessToken,\n      refreshToken,\n      expiresAt,\n      authOptions\n    } = tokenObject;\n\n    if (this.remember) {\n      this._addLocalStorage(tokenObject);\n      this._addSessionStorage(tokenObject);\n\n    } else {\n      // Not saving in localstorage if user doesnt check remember option\n      // When browser is closed, user is logged out\n      this._addSessionStorage(tokenObject);\n    }\n\n    this.tokens.user = {\n      accessToken,\n      refreshToken,\n      expiresAt\n    };\n\n    this.tokens.authOptions = authOptions;\n\n    return true;\n  }\n\n  removeAllUserData() {\n    this._removeLocalStorage();\n    this._removeSessionStorage();\n    this._removeUserCookies();\n  }\n\n  getRememberFromStorage() {\n    const remember = this.sessionStorage.remember ||\n      this.localStorage.remember;\n\n    this.remember = (remember === 'true');\n\n    return this.remember;\n  }\n\n  getTokensFromStorage() {\n    let tokens = {\n      client: this._getClientAccessToken(),\n      user: this._getUserTokens(),\n      authOptions: this._getAuthOptionsFromStorage()\n    };\n    this.tokens = tokens;\n\n    return tokens;\n  }\n}\n\nexport default AuthPersist;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/auth/AuthPersist.js\n **/","import AuthRequest from './AuthRequest';\nimport AuthPersist from './AuthPersist';\nimport * as utils from '../utils/utils';\n\nclass AuthConnector {\n  constructor({options = {}, authConfig, authPersist = new AuthPersist(), authRequest = new AuthRequest(authConfig)}) {\n    this.authPersist = authPersist;\n    this.authRequest = authRequest;\n    this.options = options;\n\n    this.userAuthenticated = false;\n  }\n\n  /////////////////\n  // Private API //\n  /////////////////\n\n  /**\n   * Validates accesstoken and refresh if it's necessary\n   */\n  _validateAccessToken() {\n    this.authPersist.getTokensFromStorage();\n    const {accessToken, expiresAt, refreshToken} = this.authPersist.tokens.user;\n    const validAccessToken = accessToken && expiresAt && (Date.now() < expiresAt);\n    let accessTokenPromise;\n\n    if (validAccessToken) {\n      // Accesstoken exists and is not expired\n      accessTokenPromise = Promise.resolve({\n        accessToken\n      });\n    } else if (refreshToken) {\n      // AccessToken expired or missed: refresh token if exists\n      accessTokenPromise = this.refreshUserToken();\n    } else {\n      accessTokenPromise = Promise.reject('No accessToken or refreshToken');\n    }\n\n    return accessTokenPromise;\n  }\n\n  /**\n   * Validates if clientAccessToken exists in sessionStorage and is not expired\n   *\n   * @return {String} clientAccessToken\n   */\n  _validateClientAccessToken(clientToken) {\n\n    const isValid = (clientToken &&\n      clientToken.accessToken &&\n      clientToken.expiresAt &&\n      Date.now() < parseInt(clientToken.expiresAt));\n\n    return isValid ? clientToken : false;\n\n  }\n\n  _parseTokenObject(response) {\n    if (response.tokenObject) {\n      return response.tokenObject;\n    }\n\n    return response;\n  }\n\n  _executePromiseCb(name, promise) {\n    if (!this.options.callbacks) {\n      return;\n    }\n\n    let successCb;\n    let errorCb;\n\n    if (this.options.callbacks.success) {\n      successCb = this.options.callbacks.success[name];\n    }\n\n    if (this.options.callbacks.error) {\n      errorCb = this.options.callbacks.error[name];\n    }\n\n    promise\n    .then(successCb)\n    .catch(errorCb);\n  }\n\n  ////////////////\n  // Public API //\n  ////////////////\n\n  /**\n   * Init method\n   * Make a client login and use authValidation method\n   * to check if exists a previous valid session\n   */\n  init() {\n    this.loginClient();\n    this.authValidation()\n      .then(() => this.userAuthenticated = true)\n      .catch(() => this.userAuthenticated = false);\n  }\n\n  /**\n   * Checks if exists a valid user session\n   *\n   * @return {Object} Promise\n   */\n  authValidation() {\n    var that = this;\n    // Use a previous authValidation promise if it is already pending\n    if (this.validationPromise && this._validationState === 'Pending') {\n      return this.validationPromise;\n    }\n\n    this._validationState = 'Pending';\n\n    const validationRequest = this._validateAccessToken();\n\n    validationRequest\n      .then(() => this._validationState = 'Resolved')\n      .catch(() => this._validationState = 'Resolved');\n\n    this.validationPromise = validationRequest;\n\n    return validationRequest;\n  }\n\n /**\n  * Dispatch user accessToken if it's available, if not, dispatch client accessToken\n  *\n  * @return {Object} Promise\n  */\n  getCurrentToken() {\n    this.authPersist.getTokensFromStorage();\n\n    const currentTokenPromise = this.authValidation()\n    .then(() => {\n      const accessToken = this.authPersist.tokens.user.accessToken;\n      if (accessToken && this.userAuthenticated === false) {\n        this.userAuthenticated = true;\n      }\n      return accessToken;\n    })\n    .catch(() => {\n      return this.loginClient()\n      .then(this._parseTokenObject)\n      .then(res => res.accessToken);\n    });\n\n    return currentTokenPromise;\n  }\n\n  /**\n   * Authenticates with client scope\n   *\n   * @return {Object} Promise\n   */\n  loginClient() {\n    this.authPersist.getTokensFromStorage();\n    const storedClientToken = this.authPersist.tokens.client;\n    const currentClientAccessToken = this._validateClientAccessToken(storedClientToken);\n\n    // Resolve current clientToken if exists\n    if (currentClientAccessToken) {\n      return Promise.resolve(currentClientAccessToken);\n    }\n\n    // Ask for a new clientToken\n    const clientAccessTokenPromise = this.authRequest.authenticateClient()\n    .then(this._parseTokenObject)\n    .then(res => {\n      this.authPersist.persistClientToken(res);\n      return res;\n    });\n\n    this._executePromiseCb('loginClient', clientAccessTokenPromise);\n    this.clientAccessTokenPromise = clientAccessTokenPromise;\n\n    return clientAccessTokenPromise;\n  }\n\n  /**\n   * Sign in method\n   *\n   * @return {Object} A result promise\n   */\n  loginUser({email, password, remember}) {\n    const {authDataExtension = {}, headersExtension = {}} = this.options;\n\n    const request = this.authRequest.authenticateUser({\n      email,\n      password,\n      remember,\n      headersExtension,\n      authDataExtension\n    })\n    .then(this._parseTokenObject)\n    .then(res => {\n      res.authOptions = this.options;\n      this.authPersist.remember = remember ? remember : false;\n      this.authPersist.persistAuthData(res);\n      this.userAuthenticated = true;\n\n      return res;\n    });\n\n    this._executePromiseCb('loginUser', request);\n    this.loginUserPromise = request;\n\n    return request;\n  }\n\n  /**\n   * Refresh token method\n   *\n   * @return {Object}  A result promise\n   */\n  refreshUserToken() {\n    this.authPersist.getTokensFromStorage();\n\n    const refreshToken = this.authPersist.tokens.user.refreshToken;\n    const {authDataExtension = {}, headersExtension = {}} = this.authPersist.tokens.authOptions;\n\n    const request = this.authRequest.refreshUserToken({\n      refreshToken,\n      headersExtension,\n      authDataExtension\n    })\n    .then(this._parseTokenObject)\n    .then(res => {\n      this.authPersist.persistAuthData(res);\n      this.userAuthenticated = true;\n\n      return res;\n    });\n\n    this._executePromiseCb('refreshUserToken', request);\n    this.refreshUserTokenPromise = request;\n\n    return request;\n  }\n\n  /**\n   * Logout method\n   * Calls _authenticate() method\n   */\n  logoutUser() {\n    this.authPersist.getTokensFromStorage();\n\n    const accessToken = this.authPersist.tokens.user.accessToken;\n    const {authDataExtension = {}, headersExtension = {}} = this.authPersist.tokens.authOptions;\n\n    const request = this.authRequest.logoutUser({\n      accessToken,\n      headersExtension,\n      authDataExtension\n    });\n\n    this.userAuthenticated = false;\n    this.authPersist.removeAllUserData();\n    this._executePromiseCb('logoutUser', request);\n\n    return request;\n  }\n}\n\nexport default AuthConnector;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/auth/AuthConnector.js\n **/","import AuthConnector from '../auth/AuthConnector';\nimport * as utils from '../utils/utils';\n\nif (this && this.Meteor) {\n  // NOTE: this only work if it is used with the meteor package version of this library.\n\n  this.Headers = fetch.Headers;\n  this.Request = fetch.Request;\n\n  fetch.Promise = Promise;\n}\n\nclass Connect {\n  constructor({config, options = {}, authConnector = new AuthConnector({\n        authConfig: config\n      })}) {\n    this.authConnector = authConnector;\n    this.endpoints = config.endpoints;\n    this.urlBase = config.urlBase;\n    this.options = options;\n\n    this._requestDataQueue = [];\n\n    this.authConnector.init();\n  }\n\n  /////////////////\n  // Private API //\n  /////////////////\n\n  _buildHeaders({token, headersExtension}) {\n    const defaultHeaders = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json; charset=utf-8',\n      'Authorization': 'Bearer ' + token\n    };\n\n    let headers = Object.assign(defaultHeaders, this.options.headersExtension, headersExtension);\n\n    return new Headers(headers);\n  }\n\n  _buildRequestParams({body, queryParams}) {\n    const queryPath = this._buildQueryPath(queryParams);\n\n    if (body) {\n      body = JSON.stringify(body);\n    }\n\n    return {\n      body,\n      queryPath\n    };\n  }\n\n  _buildQueryPath(dict) {\n    var query = '';\n    if (dict) {\n      var queries = [];\n      Object.keys(dict).forEach(function(key) {\n        queries.push(key + '=' + dict[key]);\n      });\n      if (queries.length > 0) {\n        query = '?' + queries.join('&');\n      }\n    }\n    return query;\n  }\n\n  _buildUrl({endpoint, queryPath}) {\n    let requestEndpoint = this.endpoints[endpoint];\n\n    if (endpoint.key) {\n      requestEndpoint = this.endpoints[endpoint.key] + endpoint.id;\n    }\n\n    const url = utils.buildURI(this.urlBase) + requestEndpoint + queryPath;\n\n    return url;\n  }\n\n  _buildRequest({endpoint, method, params, data, headersExtension} , token) {\n    const {body, queryPath} = this._buildRequestParams({\n      queryParams: params,\n      body: data\n    });\n    const url = this._buildUrl({\n      endpoint,\n      queryPath\n    });\n    const headers = this._buildHeaders({\n      token,\n      headersExtension\n    });\n\n    const request = new Request(url, {\n      credentials: 'same-origin',\n      mode: 'cors',\n      cache: 'no-store',\n      method,\n      headers,\n      body\n    });\n\n    return fetch(request)\n      .then(utils.checkStatus);\n  }\n\n  _createRetryRequests(tokenObject) {\n    const { accessToken } = tokenObject;\n    let requestDataQueue;\n    let requestsCallback;\n    let retryRequests = [];\n\n    if (this.options.retryRequestProxy) {\n      const retryRequestProxyResponse = this.options.retryRequestProxy(tokenObject, this._requestDataQueue);\n      requestDataQueue = retryRequestProxyResponse.requestDataQueue;\n      requestsCallback = retryRequestProxyResponse.requestsCallback;\n    } else {\n      requestDataQueue = this._requestDataQueue;\n      requestsCallback = (data) => data;\n    }\n\n    for (const data of requestDataQueue) {\n      const request = this._buildRequest(data, accessToken);\n\n      retryRequests.push(request);\n    }\n\n    this._requestDataQueue = [];\n\n    return Promise.all(retryRequests)\n      .then(requestsCallback);\n  }\n\n  _retry(requestData) {\n    this._requestDataQueue.push(requestData);\n\n    if (this._retryStatus === 'Pending') {\n      return this._retryRequest;\n    }\n\n    const refreshTokenPromise = this.authConnector.refreshUserToken();\n    this._retryRequest = refreshTokenPromise\n      .then((tokenObject) => this._createRetryRequests(tokenObject));\n\n    refreshTokenPromise\n      .then(() => this._retryStatus = 'Resolved')\n      .catch(() => this._retryStatus = 'Resolved');\n\n    return this._retryRequest;\n  }\n\n  /**\n   * Send request\n   *\n   * @param  {Object} requestData\n   * @return {Object} Promise\n   */\n  _request(requestData, retry = true) {\n    const fetchRequest = this.authConnector.getCurrentToken()\n      .then((token) => {\n        const request = this._buildRequest(requestData, token);\n\n        return request;\n      })\n      .catch((err) => {\n        if (retry && err.status === 401 && this.authConnector.userAuthenticated) {\n          return this._retry(requestData);\n        }\n\n        throw err;\n      });\n\n    return fetchRequest;\n  }\n\n  ////////////////\n  // Public API //\n  ////////////////\n\n  /**\n   * Send request through proxy\n   *\n   * @param  {Object} requestData\n   * @return {Object} Promise\n   */\n  request(requestData, retry = true) {\n\n    if (this.options.requestProxy) {\n      const requestProxy = this.options.requestProxy;\n      return requestProxy(this._request, requestData, retry);\n    }\n\n    return this._request(requestData, retry);\n  }\n\n  /**\n   * GET request\n   *\n   * @param  {String} endpoint\n   * @param  {Object} params\n   * @return {Object}  Request promise\n   */\n  get(endpoint, params) {\n    const requestData = {\n      method: 'get',\n      endpoint,\n      params\n    };\n\n    return this.request(requestData);\n  }\n\n  /**\n   * DELETE request\n   *\n   * @param  {String} endpoint\n   * @param  {Object} params\n   * @return {Object}  Request promise\n   */\n  delete(endpoint, params) {\n    const requestData = {\n      method: 'delete',\n      endpoint,\n      params\n    };\n\n    return this.request(requestData);\n  }\n\n  /**\n   * POST request\n   *\n   * @param  {String} endpoint\n   * @param  {Object} data\n   * @return {Object}  Request promise\n   */\n  post(endpoint, data) {\n    const requestData = {\n      method: 'post',\n      endpoint,\n      data\n    };\n\n    return this.request(requestData);\n  }\n\n  /**\n   * PUT request\n   *\n   * @param  {String} endpoint\n   * @param  {Object} data\n   * @return {Object}  Request promise\n   */\n  put(endpoint, data) {\n    const requestData = {\n      method: 'put',\n      endpoint,\n      data\n    };\n\n    return this.request(requestData);\n  }\n\n}\n\nexport default Connect;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/Connect.js\n **/"],"sourceRoot":""}